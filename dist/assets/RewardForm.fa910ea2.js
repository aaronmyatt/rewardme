var P=Object.defineProperty,h=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var p=(l,e,a)=>e in l?P(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,f=(l,e)=>{for(var a in e||(e={}))C.call(e,a)&&p(l,a,e[a]);if(c)for(var a of c(e))F.call(e,a)&&p(l,a,e[a]);return l},b=(l,e)=>h(l,B(e));import{Q as U,a as v,b as k,_ as A}from"./QForm.01ff53c9.js";import{d as D,l as N,k as S,j as M,m as O,r as g,a2 as z,bj as E,o as G,f as J,w as u,n as o,a as V,u as i,a6 as L,D as T,q as $,y as _,s as H,p as K}from"./vendor.d1b1e1eb.js";import{u as W,i as w,R as Q}from"./index.7965bb5e.js";const X={class:"flex justify-end"},se=D({props:{modelValue:null},emits:["submit"],setup(l,{emit:e}){const a=l,y=N(),j=S(),{getActiveProfile:R}=W(),s=M(a.modelValue||{});O(()=>{const t=R();t&&t.id?Object.assign(s,b(f({},s),{profile:t.id})):y.notify({type:"warning",caption:"Please add or activate a profile first",timeout:0,closeBtn:!0,actions:[{label:"Go to Profiles",handler:()=>j.push("/profiles")}]})});const n=g(),d=g();z(n,()=>{const t=new FileReader;t.readAsDataURL(n.value),t.onload=async()=>{await w.setImage(n.value.name,t.result),s.image=n.value.name}}),E(async()=>{s.image&&(d.value=await w.getImage(s.image))});function I(){const t=Q.safeParse(s);t.success&&e("submit",t.data)}function q(){Object.assign(s,Q.parse(a.modelValue)),n.value=null,d.value=null}return(t,r)=>{const x=A;return G(),J(K,{flat:""},{default:u(()=>[o(H,null,{default:u(()=>[V("div",null,[o(x,{jsonable:i(s)},null,8,["jsonable"]),o(U,{class:"q-gutter-md",onSubmit:I,onReset:q},{default:u(()=>[o(v,{modelValue:i(s).name,"onUpdate:modelValue":r[0]||(r[0]=m=>i(s).name=m),label:"Name",required:""},null,8,["modelValue"]),o(v,{modelValue:i(s).milestone,"onUpdate:modelValue":r[1]||(r[1]=m=>i(s).milestone=m),modelModifiers:{number:!0},type:"number",label:"Target",required:""},null,8,["modelValue"]),o(k,{modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=m=>n.value=m),placeholder:i(s).image,outlined:""},{prepend:u(()=>[o(L,{name:"attach_file"})]),append:u(()=>[o(T,{size:"50px"},{default:u(()=>[o($,{src:d.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue","placeholder"]),V("div",X,[o(_,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),o(_,{label:"Submit",type:"submit",color:"primary"})])]),_:1})])]),_:1})]),_:1})}}});export{se as _};
