var G=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var T=(e,a,t)=>a in e?G(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,y=(e,a)=>{for(var t in a||(a={}))Z.call(a,t)&&T(e,t,a[t]);if(D)for(var t of D(a))ee.call(a,t)&&T(e,t,a[t]);return e},w=(e,a)=>X(e,Y(a));import{f as te,Q as ae,a as N,b as ne,_ as re}from"./QForm.296f46be.js";import{a1 as Q,r as k,a3 as f,a6 as s,a9 as A,H as le,aC as oe,a7 as F,am as se,bb as U,a5 as K,av as ue,aS as ie,ak as $,af as ce,ah as pe,aD as de,bc as ve,aB as fe,A as I,h as W,l as me,i as be,o as j,j as R,w as m,q as r,f as V,u as b,bd as O,a8 as _e,t as ge,be as E,B as he,y as ke,s as ye,m as Ce,d as Se,D as qe,C as xe,E as Pe}from"./vendor.ebcca839.js";import{u as Ve,b as we,c as Qe,d as $e,e as Ie,Q as Be,a as Ne}from"./QColor.007f54a4.js";import{i as L,P as H,u as je}from"./index.d2a5b63e.js";import"./QItemLabel.b84cee89.js";var z=Q({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:a}){const{proxy:{$q:t}}=F(),p=k(null),o=f(()=>e.stepper.modelValue===e.step.name),c=f(()=>{const l=e.step.disable;return l===!0||l===""}),i=f(()=>{const l=e.step.error;return l===!0||l===""}),d=f(()=>{const l=e.step.done;return c.value===!1&&(l===!0||l==="")}),_=f(()=>{const l=e.step.headerNav,g=l===!0||l===""||l===void 0;return c.value===!1&&e.stepper.headerNav&&g}),q=f(()=>e.step.prefix&&o.value===!1&&i.value===!1&&d.value===!1),h=f(()=>o.value===!0?e.step.activeIcon||e.stepper.activeIcon||t.iconSet.stepper.active:i.value===!0?e.step.errorIcon||e.stepper.errorIcon||t.iconSet.stepper.error:c.value===!1&&d.value===!0?e.step.doneIcon||e.stepper.doneIcon||t.iconSet.stepper.done:e.step.icon||e.stepper.inactiveIcon),n=f(()=>{const l=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(o.value===!0){const g=e.step.activeColor||e.stepper.activeColor||e.step.color;return g!==void 0?g:l}return l!==void 0?l:c.value===!1&&d.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),u=f(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(n.value!==void 0?` text-${n.value}`:"")+(i.value===!0?" q-stepper__tab--error":"")+(o.value===!0?" q-stepper__tab--active":"")+(d.value===!0?" q-stepper__tab--done":"")+(_.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(c.value===!0?" q-stepper__tab--disabled":"")),x=f(()=>e.stepper.headerNav!==!0?!1:_.value);function v(){p.value!==null&&p.value.focus(),o.value===!1&&e.goToPanel(e.step.name)}function B(l){l.keyCode===13&&o.value===!1&&e.goToPanel(e.step.name)}return()=>{const l={class:u.value};_.value===!0&&(l.onClick=v,l.onKeyup=B,Object.assign(l,c.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:a.tabindex||0}));const g=[s("div",{class:"q-focus-helper",tabindex:-1,ref:p}),s("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[s("span",{class:"row flex-center"},[q.value===!0?e.step.prefix:s(A,{name:h.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const P=[s("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&P.push(s("div",{class:"q-stepper__caption"},e.step.caption)),g.push(s("div",{class:"q-stepper__label q-stepper__line relative-position"},P))}return le(s("div",l,g),[[oe,x.value]])}}});function M(e){return s("div",{class:"q-stepper__step-content"},[s("div",{class:"q-stepper__step-inner"},$(e.default))])}const J={setup(e,{slots:a}){return()=>M(a)}};var C=Q({name:"QStep",props:w(y({},Ve),{icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean}),setup(e,{slots:a}){const t=se(U,()=>{console.error("QStep needs to be child of QStepper")}),{getCacheWithFn:p}=we(),o=k(null),c=f(()=>t.value.modelValue===e.name);K(c,_=>{_===!0&&t.value.vertical===!0&&ue(()=>{o.value!==null&&(o.value.scrollTop=0)})});const i=f(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function d(){const _=t.value.vertical;return _===!0&&t.value.keepAlive===!0?s(ie,t.value.keepAliveProps.value,c.value===!0?[s(t.value.needsUniqueKeepAliveWrapper.value===!0?p(i.value,()=>w(y({},J),{name:i.value})):J,{key:i.value},a.default)]:void 0):_!==!0||c.value===!0?M(a):void 0}return()=>s("div",{ref:o,class:"q-stepper__step"},t.value.vertical===!0?[s(z,{stepper:t.value,step:e,goToPanel:t.value.goToPanel}),t.value.animated===!0?s(te,d):d()]:[d()])}});const De=/(-\w)/g;function Te(e){const a={};for(const t in e){const p=t.replace(De,o=>o[1].toUpperCase());a[p]=e[t]}return a}var Ae=Q({name:"QStepper",props:w(y(y({},ce),Qe),{flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String}),emits:$e,setup(e,{slots:a}){const t=F(),p=pe(e,t.proxy.$q),{updatePanelsList:o,isValidPanelName:c,updatePanelIndex:i,getPanelContent:d,getPanels:_,panelDirectives:q,goToPanel:h,keepAliveProps:n,needsUniqueKeepAliveWrapper:u}=Ie();de(U,f(()=>y({goToPanel:h,keepAliveProps:n,needsUniqueKeepAliveWrapper:u},e)));const x=f(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||p.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||p.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(p.value===!0?" q-stepper--dark q-dark":"")),v=f(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function B(){const l=$(a.message,[]);if(e.vertical===!0){c(e.modelValue)&&i();const g=s("div",{class:"q-stepper__content"},$(a.default));return l===void 0?[g]:l.concat(g)}return[s("div",{class:v.value},_().map(g=>{const P=Te(g.props);return s(z,{key:P.name,stepper:e,step:P,goToPanel:h})})),l,fe("div",{class:"q-stepper__content q-panel-parent"},d(),"cont",e.swipeable,()=>q.value)]}return()=>(o(a),s("div",{class:x.value},ve(a.navigation,B())))}}),Fe=Q({name:"QStepperNavigation",setup(e,{slots:a}){return()=>s("div",{class:"q-stepper__nav"},$(a.default))}});const S={props:["step","backFunc","nextFunc"],render(){const e=s(I,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),a=s(I,{onClick:this.nextFunc,label:"Continue",color:"primary"});return s(Fe,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<6?a:void 0])}},Ue={class:"flex justify-center space-y-2"},Ke={class:"flex justify-end pt-4 space-x-2"},We=W({emits:["submit"],setup(e,{emit:a}){const t=me({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),p=k(!1),o=k(),c=k(),i=k(1),d=k("");K(o,()=>{const n=new FileReader;n.readAsDataURL(o.value),n.onload=async()=>{await L.setImage(o.value.name,n.result),c.value=await L.getImage(o.value.name),t.image=o.value.name}});function _(){d.value="";const n=H.safeParse(t);n.success?p.value=!0:(p.value=!0,i.value=1,d.value=n.error.issues[0].message)}function q(){const n=H.safeParse(t);p.value&&n.success&&a("submit",n.data)}function h(){t.name="",Object.assign(t,{})}return be(()=>{h()}),(n,u)=>{const x=re;return j(),R(ye,{flat:""},{default:m(()=>[r(ke,null,{default:m(()=>[V("div",null,[r(x,{jsonable:b(t)},null,8,["jsonable"]),r(ae,{ref:"profileForm",class:"relative",onReset:h},{default:m(()=>[V("div",null,[r(Ae,{ref:"stepper",modelValue:i.value,"onUpdate:modelValue":u[6]||(u[6]=v=>i.value=v),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:u[7]||(u[7]=O(E(v=>n.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:_},{default:m(()=>[r(C,{name:1,title:"What's your name?",icon:"person_outline",error:!!d.value},{default:m(()=>[r(N,{modelValue:b(t).name,"onUpdate:modelValue":u[0]||(u[0]=v=>b(t).name=v),label:"Name",required:"","stack-label":"",autofocus:"",error:!!d.value,"error-message":d.value},null,8,["modelValue","error","error-message"]),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),r(C,{name:2,title:"Do you have a nickname?",caption:"Optional",icon:"sentiment_very_satisfied"},{default:m(()=>[r(N,{modelValue:b(t).nickname,"onUpdate:modelValue":u[1]||(u[1]=v=>b(t).nickname=v),label:"Nickname",required:"","stack-label":"",autofocus:""},null,8,["modelValue"]),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),r(C,{name:3,title:"What's your favourite thing to do?",icon:"attractions",caption:"Optional"},{default:m(()=>[r(N,{modelValue:b(t).hobby,"onUpdate:modelValue":u[2]||(u[2]=v=>b(t).hobby=v),label:"Hobby","stack-label":"",autofocus:""},null,8,["modelValue"]),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),r(C,{name:4,title:"When is your birthday?",icon:"event",class:"flex justify-center",caption:"Optional"},{default:m(()=>[r(Be,{modelValue:b(t).dateofbirth,"onUpdate:modelValue":u[3]||(u[3]=v=>b(t).dateofbirth=v),flat:"",minimal:"",landscape:n.$q.screen.gt.sm},null,8,["modelValue","landscape"]),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),r(C,{name:5,title:"What's your favourite colour?",caption:"Optional",icon:"palette",class:"flex justify-center"},{default:m(()=>[V("div",{style:_e({backgroundColor:b(t).color+"70",borderWidth:"5px",borderColor:b(t).color})},[r(Ne,{modelValue:b(t).color,"onUpdate:modelValue":u[4]||(u[4]=v=>b(t).color=v),square:"",w:"300px",flat:"","no-footer":"","no-header":"","default-view":"palette","format-model":"hex"},null,8,["modelValue"])],4),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),r(C,{name:6,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:m(()=>[V("div",Ue,[r(ge,{class:"w-1/2",src:c.value},null,8,["src"]),r(ne,{modelValue:o.value,"onUpdate:modelValue":u[5]||(u[5]=v=>o.value=v),outlined:""},{prepend:m(()=>[r(A,{name:"attach_file"})]),_:1},8,["modelValue"])]),r(S,{step:i.value,"back-func":()=>n.$refs.stepper.previous(),"next-func":()=>n.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),V("div",Ke,[r(I,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),p.value?(j(),R(I,{key:0,label:"Submit",color:"primary",onClick:q,onKeydown:u[8]||(u[8]=O(E(()=>{},["prevent","stop"]),["enter"]))})):he("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),Re={class:"w-full md:w-1/2 mx-auto"},Oe=Pe(" New Profile "),Ge=W({setup(e){const a=Ce(),{setActiveProfile:t,profiles:p}=je();function o(c){p.push(c),t(c),a.push("/profiles")}return(c,i)=>{const d=We;return j(),Se("div",Re,[r(xe,null,{default:m(()=>[r(qe,null,{default:m(()=>[Oe]),_:1})]),_:1}),r(d,{onSubmit:o})])}}});export{Ge as default};
