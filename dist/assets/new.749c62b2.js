import{am as F,m as q,n as m,N as p,ab as le,aR as ye,au as Ce,as as E,aZ as xe,ax as N,a_ as Se,a$ as Pe,b0 as B,b1 as j,b2 as Y,av as K,b3 as qe,b4 as U,t as ue,aN as we,b5 as ke,b6 as Ie,aL as I,b7 as ce,aW as Ae,aX as L,b8 as Ne,b9 as de,an as Te,ap as Ve,aI as Be,ba as $e,ar as Qe,h as D,d as pe,D as De,a8 as H,a9 as Fe,o as Q,T as W,w as P,b as y,a as $,e as x,B as J,bb as Z,aa as Ee,ac as Re,aj as G,ad as je,ae as Ke,af as ee,ag as Ue,bc as te,u as Le,X as We,c as ze,g as Me,a5 as Oe,f as Xe}from"./index.a953e485.js";import{Q as Ye,a as He}from"./QForm.9056ba52.js";const ve=F({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:t}){const{proxy:{$q:o}}=E(),d=q(null),a=m(()=>e.stepper.modelValue===e.step.name),n=m(()=>{const i=e.step.disable;return i===!0||i===""}),r=m(()=>{const i=e.step.error;return i===!0||i===""}),u=m(()=>{const i=e.step.done;return n.value===!1&&(i===!0||i==="")}),g=m(()=>{const i=e.step.headerNav,f=i===!0||i===""||i===void 0;return n.value===!1&&e.stepper.headerNav&&f}),h=m(()=>e.step.prefix&&(a.value===!1||e.stepper.activeIcon==="none")&&(r.value===!1||e.stepper.errorIcon==="none")&&(u.value===!1||e.stepper.doneIcon==="none")),v=m(()=>{const i=e.step.icon||e.stepper.inactiveIcon;if(a.value===!0){const f=e.step.activeIcon||e.stepper.activeIcon;return f==="none"?i:f||o.iconSet.stepper.active}if(r.value===!0){const f=e.step.errorIcon||e.stepper.errorIcon;return f==="none"?i:f||o.iconSet.stepper.error}if(n.value===!1&&u.value===!0){const f=e.step.doneIcon||e.stepper.doneIcon;return f==="none"?i:f||o.iconSet.stepper.done}return i}),c=m(()=>{const i=r.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(a.value===!0){const f=e.step.activeColor||e.stepper.activeColor||e.step.color;return f!==void 0?f:i}return i!==void 0?i:n.value===!1&&u.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),s=m(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(c.value!==void 0?` text-${c.value}`:"")+(r.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(h.value===!0?"prefix":"icon"):"")+(a.value===!0?" q-stepper__tab--active":"")+(u.value===!0?" q-stepper__tab--done":"")+(g.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(n.value===!0?" q-stepper__tab--disabled":"")),C=m(()=>e.stepper.headerNav!==!0?!1:g.value);function _(){d.value!==null&&d.value.focus(),a.value===!1&&e.goToPanel(e.step.name)}function w(i){i.keyCode===13&&a.value===!1&&e.goToPanel(e.step.name)}return()=>{const i={class:s.value};g.value===!0&&(i.onClick=_,i.onKeyup=w,Object.assign(i,n.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0}));const f=[p("div",{class:"q-focus-helper",tabindex:-1,ref:d}),p("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[p("span",{class:"row flex-center"},[h.value===!0?e.step.prefix:p(le,{name:v.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const k=[p("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&k.push(p("div",{class:"q-stepper__caption"},e.step.caption)),f.push(p("div",{class:"q-stepper__label q-stepper__line relative-position"},k))}return ye(p("div",i,f),[[Ce,C.value]])}}}),z={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Je=Object.keys(z);z.all=!0;function ne(e){const t={};for(const o of Je)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?z:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function ae(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Ze(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,d)=>{const a=parseFloat(o);a&&(t[d]=a)}),t}const Ge=xe({name:"touch-swipe",beforeMount(e,{value:t,arg:o,modifiers:d}){if(d.mouse!==!0&&N.has.touch!==!0)return;const a=d.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:Ze(o),direction:ne(d),noop:Se,mouseStart(r){ae(r,n)&&Pe(r)&&(B(n,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(r,!0))},touchStart(r){if(ae(r,n)){const u=r.target;B(n,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),n.start(r)}},start(r,u){N.is.firefox===!0&&j(e,!0);const g=Y(r);n.event={x:g.left,y:g.top,time:Date.now(),mouse:u===!0,dir:!1}},move(r){if(n.event===void 0)return;if(n.event.dir!==!1){K(r);return}const u=Date.now()-n.event.time;if(u===0)return;const g=Y(r),h=g.left-n.event.x,v=Math.abs(h),c=g.top-n.event.y,s=Math.abs(c);if(n.event.mouse!==!0){if(v<n.sensitivity[1]&&s<n.sensitivity[1]){n.end(r);return}}else if(v<n.sensitivity[2]&&s<n.sensitivity[2])return;const C=v/u,_=s/u;n.direction.vertical===!0&&v<s&&v<100&&_>n.sensitivity[0]&&(n.event.dir=c<0?"up":"down"),n.direction.horizontal===!0&&v>s&&s<100&&C>n.sensitivity[0]&&(n.event.dir=h<0?"left":"right"),n.direction.up===!0&&v<s&&c<0&&v<100&&_>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&v<s&&c>0&&v<100&&_>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&v>s&&h<0&&s<100&&C>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&v>s&&h>0&&s<100&&C>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(K(r),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),qe(),n.styleCleanup=w=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const i=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(i,50):i()}),n.handler({evt:r,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:u,distance:{x:v,y:s}})):n.end(r)},end(r){n.event!==void 0&&(U(n,"temp"),N.is.firefox===!0&&j(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),r!==void 0&&n.event.dir!==!1&&K(r),n.event=void 0)}};if(e.__qtouchswipe=n,d.mouse===!0){const r=d.mouseCapture===!0||d.mousecapture===!0?"Capture":"";B(n,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}N.has.touch===!0&&B(n,"main",[[e,"touchstart","touchStart",`passive${d.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchswipe;o!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&o.end(),o.handler=t.value),o.direction=ne(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(U(t,"main"),U(t,"temp"),N.is.firefox===!0&&j(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function fe(){const e=new Map;return{getCache:function(t,o){return e[t]===void 0?e[t]=o:e[t]},getCacheWithFn:function(t,o){return e[t]===void 0?e[t]=o():e[t]}}}const et={name:{required:!0},disable:Boolean},re={setup(e,{slots:t}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},I(t.default))}},tt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},nt=["update:modelValue","beforeTransition","transition"];function at(){const{props:e,emit:t,proxy:o}=E(),{getCacheWithFn:d}=fe();let a,n;const r=q(null),u=q(null);function g(l){const b=e.vertical===!0?"up":"left";A((o.$q.lang.rtl===!0?-1:1)*(l.direction===b?1:-1))}const h=m(()=>[[Ge,g,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),c=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),s=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),C=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),_=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ue(()=>e.modelValue,(l,b)=>{const S=T(l)===!0?R(l):-1;n!==!0&&M(S===-1?0:S<R(b)?-1:1),r.value!==S&&(r.value=S,t("beforeTransition",l,b),we(()=>{t("transition",l,b)}))});function i(){A(1)}function f(){A(-1)}function k(l){t("update:modelValue",l)}function T(l){return l!=null&&l!==""}function R(l){return a.findIndex(b=>b.props.name===l&&b.props.disable!==""&&b.props.disable!==!0)}function be(){return a.filter(l=>l.props.disable!==""&&l.props.disable!==!0)}function M(l){const b=l!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(l===-1?v.value:c.value):null;u.value!==b&&(u.value=b)}function A(l,b=r.value){let S=b+l;for(;S>-1&&S<a.length;){const V=a[S];if(V!==void 0&&V.props.disable!==""&&V.props.disable!==!0){M(l),n=!0,t("update:modelValue",V.props.name),setTimeout(()=>{n=!1});return}S+=l}e.infinite===!0&&a.length>0&&b!==-1&&b!==a.length&&A(l,l===-1?a.length:-1)}function O(){const l=R(e.modelValue);return r.value!==l&&(r.value=l),!0}function X(){const l=T(e.modelValue)===!0&&O()&&a[r.value];return e.keepAlive===!0?[p(ce,_.value,[p(w.value===!0?d(C.value,()=>({...re,name:C.value})):re,{key:C.value,style:s.value},()=>l)])]:[p("div",{class:"q-panel scroll",style:s.value,key:C.value,role:"tabpanel"},[l])]}function ge(){if(a.length!==0)return e.animated===!0?[p(ke,{name:u.value},X)]:X()}function he(l){return a=Ie(I(l.default,[])).filter(b=>b.props!==null&&b.props.slot===void 0&&T(b.props.name)===!0),a.length}function _e(){return a}return Object.assign(o,{next:i,previous:f,goTo:k}),{panelIndex:r,panelDirectives:h,updatePanelsList:he,updatePanelIndex:O,getPanelContent:ge,getEnabledPanels:be,getPanels:_e,isValidPanelName:T,keepAliveProps:_,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:A,goToPanel:k,nextPanel:i,previousPanel:f}}function me(e){return p("div",{class:"q-stepper__step-content"},[p("div",{class:"q-stepper__step-inner"},I(e.default))])}const oe={setup(e,{slots:t}){return()=>me(t)}},ie=F({name:"QStep",props:{...et,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:t,emit:o}){const{proxy:{$q:d}}=E(),a=Ae(de,L);if(a===L)return console.error("QStep needs to be a child of QStepper"),L;const{getCacheWithFn:n}=fe(),r=q(null),u=m(()=>a.value.modelValue===e.name),g=m(()=>d.platform.is.ios!==!0&&d.platform.is.chrome===!0||u.value!==!0||a.value.vertical!==!0?{}:{onScroll(c){const{target:s}=c;s.scrollTop>0&&(s.scrollTop=0),e.onScroll!==void 0&&o("scroll",c)}}),h=m(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function v(){const c=a.value.vertical;return c===!0&&a.value.keepAlive===!0?p(ce,a.value.keepAliveProps.value,u.value===!0?[p(a.value.needsUniqueKeepAliveWrapper.value===!0?n(h.value,()=>({...oe,name:h.value})):oe,{key:h.value},t.default)]:void 0):c!==!0||u.value===!0?me(t):void 0}return()=>p("div",{ref:r,class:"q-stepper__step",role:"tabpanel",...g.value},a.value.vertical===!0?[p(ve,{stepper:a.value,step:e,goToPanel:a.value.goToPanel}),a.value.animated===!0?p(Ne,v):v()]:[v()])}}),rt=/(-\w)/g;function ot(e){const t={};for(const o in e){const d=o.replace(rt,a=>a[1].toUpperCase());t[d]=e[o]}return t}const it=F({name:"QStepper",props:{...Te,...tt,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:nt,setup(e,{slots:t}){const o=E(),d=Ve(e,o.proxy.$q),{updatePanelsList:a,isValidPanelName:n,updatePanelIndex:r,getPanelContent:u,getPanels:g,panelDirectives:h,goToPanel:v,keepAliveProps:c,needsUniqueKeepAliveWrapper:s}=at();Be(de,m(()=>({goToPanel:v,keepAliveProps:c,needsUniqueKeepAliveWrapper:s,...e})));const C=m(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||d.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||d.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(d.value===!0?" q-stepper--dark q-dark":"")),_=m(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function w(){const i=I(t.message,[]);if(e.vertical===!0){n(e.modelValue)&&r();const f=p("div",{class:"q-stepper__content"},I(t.default));return i===void 0?[f]:i.concat(f)}return[p("div",{class:_.value},g().map(f=>{const k=ot(f.props);return p(ve,{key:k.name,stepper:e,step:k,goToPanel:v})})),i,Qe("div",{class:"q-stepper__content q-panel-parent"},u(),"cont",e.swipeable,()=>h.value)]}return()=>(a(t),p("div",{class:C.value},$e(t.navigation,w())))}}),st=F({name:"QStepperNavigation",setup(e,{slots:t}){return()=>p("div",{class:"q-stepper__nav"},I(t.default))}}),se={props:["step","backFunc","nextFunc"],render(){const e=p(D,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),t=p(D,{onClick:this.nextFunc,label:"Continue",color:"primary"});return p(st,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<2?t:void 0])}},lt={class:"flex flex-col justify-center space-y-2"},ut={class:"flex justify-end pt-4 space-x-2"},ct=pe({__name:"NewProfileForm",emits:["submit"],setup(e,{emit:t}){const o=De({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),d=q(!1),a=q(),n=q(),r=q(1),u=q("");ue(a,()=>{const c=new FileReader;c.readAsDataURL(a.value),c.onload=async()=>{await H.setImage(a.value.name,c.result),n.value=await H.getImage(a.value.name),o.image=a.value.name}});function g(){u.value="";const c=ee.safeParse(o);c.success?d.value=!0:(d.value=!0,r.value=1,u.value=c.error.issues[0].message)}function h(){const c=ee.safeParse(o);d.value&&c.success&&t("submit",c.data)}function v(){o.name="",Object.assign(o,{})}return Fe(()=>{v()}),(c,s)=>{const C=Ue;return Q(),W(Ke,{flat:""},{default:P(()=>[y(je,null,{default:P(()=>[$("div",null,[y(C,{jsonable:x(o)},null,8,["jsonable"]),y(Ye,{ref:"profileForm",class:"relative",onReset:v},{default:P(()=>[$("div",null,[y(it,{ref:"stepper",modelValue:x(r),"onUpdate:modelValue":s[2]||(s[2]=_=>J(r)?r.value=_:null),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:s[3]||(s[3]=Z(te(_=>c.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:g},{default:P(()=>[y(ie,{name:1,title:"What's your name?",icon:"person_outline",error:!!x(u)},{default:P(()=>[y(Ee,{modelValue:x(o).name,"onUpdate:modelValue":s[0]||(s[0]=_=>x(o).name=_),label:"Name",required:"",autofocus:"",error:!!x(u),"error-message":x(u),"bg-color":"secondary","label-color":"primary"},null,8,["modelValue","error","error-message"]),y(se,{step:x(r),"back-func":()=>c.$refs.stepper.previous(),"next-func":()=>c.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),y(ie,{name:2,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:P(()=>[$("div",lt,[x(n)?(Q(),W(Re,{key:0,src:x(n)},null,8,["src"])):G("",!0),y(He,{modelValue:x(a),"onUpdate:modelValue":s[1]||(s[1]=_=>J(a)?a.value=_:null),outlined:""},{prepend:P(()=>[y(le,{name:"attach_file"})]),_:1},8,["modelValue"])]),y(se,{step:x(r),"back-func":()=>c.$refs.stepper.previous(),"next-func":()=>c.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),$("div",ut,[y(D,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),x(d)?(Q(),W(D,{key:0,label:"Submit",color:"primary",onClick:h,onKeydown:s[4]||(s[4]=Z(te(()=>{},["prevent","stop"]),["enter"]))})):G("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),dt={class:"w-full md:w-1/2 mx-auto"},ft=pe({__name:"new",setup(e){const t=Le(),{setActiveProfile:o,profiles:d}=We();function a(n){d.push(n),o(n),t.push("/profiles")}return(n,r)=>{const u=ct;return Q(),ze("div",dt,[y(Xe,null,{default:P(()=>[y(Me,null,{default:P(()=>[Oe(" New Profile ")]),_:1})]),_:1}),y(u,{onSubmit:a})])}}});export{ft as default};
