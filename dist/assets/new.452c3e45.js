import{a9 as D,p as S,A as f,C as d,$ as se,aB as _e,ag as ye,x as L,aH as Ce,aI as I,aJ as xe,aK as Pe,aL as B,aM as E,aN as Y,ah as K,aO as Se,aP as U,q as W,z as le,aQ as qe,aR as ue,aS as ke,ax as w,aF as we,aT as ce,aU as Ae,aa as Ie,ac as Ve,av as Ne,aV as Be,ae as Te,i as Q,d as de,D as $e,X as H,Y as Qe,o as $,F as j,w as P,b as _,a as T,e as R,aW as J,Z as De,a0 as Fe,a6 as Z,aX as G,a1 as Ee,a2 as Ke,a3 as ee,a4 as Ue,u as je,J as Re,c as Le,h as We,g as ze,U as Me}from"./index.9630c0f8.js";import{Q as Oe,a as Xe}from"./QForm.525b499b.js";var ve=D({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:a}}=L(),c=S(null),o=f(()=>e.stepper.modelValue===e.step.name),t=f(()=>{const l=e.step.disable;return l===!0||l===""}),r=f(()=>{const l=e.step.error;return l===!0||l===""}),s=f(()=>{const l=e.step.done;return t.value===!1&&(l===!0||l==="")}),m=f(()=>{const l=e.step.headerNav,b=l===!0||l===""||l===void 0;return t.value===!1&&e.stepper.headerNav&&b}),C=f(()=>e.step.prefix&&o.value===!1&&r.value===!1&&s.value===!1),p=f(()=>o.value===!0?e.step.activeIcon||e.stepper.activeIcon||a.iconSet.stepper.active:r.value===!0?e.step.errorIcon||e.stepper.errorIcon||a.iconSet.stepper.error:t.value===!1&&s.value===!0?e.step.doneIcon||e.stepper.doneIcon||a.iconSet.stepper.done:e.step.icon||e.stepper.inactiveIcon),v=f(()=>{const l=r.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(o.value===!0){const b=e.step.activeColor||e.stepper.activeColor||e.step.color;return b!==void 0?b:l}return l!==void 0?l:t.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),u=f(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(v.value!==void 0?` text-${v.value}`:"")+(r.value===!0?" q-stepper__tab--error":"")+(o.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(m.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),y=f(()=>e.stepper.headerNav!==!0?!1:m.value);function h(){c.value!==null&&c.value.focus(),o.value===!1&&e.goToPanel(e.step.name)}function q(l){l.keyCode===13&&o.value===!1&&e.goToPanel(e.step.name)}return()=>{const l={class:u.value};m.value===!0&&(l.onClick=h,l.onKeyup=q,Object.assign(l,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const b=[d("div",{class:"q-focus-helper",tabindex:-1,ref:c}),d("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[d("span",{class:"row flex-center"},[C.value===!0?e.step.prefix:d(se,{name:p.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const k=[d("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&k.push(d("div",{class:"q-stepper__caption"},e.step.caption)),b.push(d("div",{class:"q-stepper__label q-stepper__line relative-position"},k))}return _e(d("div",l,b),[[ye,y.value]])}}});const z={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ye=Object.keys(z);z.all=!0;function te(e){const n={};for(const a of Ye)e[a]===!0&&(n[a]=!0);return Object.keys(n).length===0?z:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function ne(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function He(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((a,c)=>{const o=parseFloat(a);o&&(n[c]=o)}),n}var Je=Ce({name:"touch-swipe",beforeMount(e,{value:n,arg:a,modifiers:c}){if(c.mouse!==!0&&I.has.touch!==!0)return;const o=c.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:He(a),direction:te(c),noop:xe,mouseStart(r){ne(r,t)&&Pe(r)&&(B(t,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(r,!0))},touchStart(r){if(ne(r,t)){const s=r.target;B(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),t.start(r)}},start(r,s){I.is.firefox===!0&&E(e,!0);const m=Y(r);t.event={x:m.left,y:m.top,time:Date.now(),mouse:s===!0,dir:!1}},move(r){if(t.event===void 0)return;if(t.event.dir!==!1){K(r);return}const s=Date.now()-t.event.time;if(s===0)return;const m=Y(r),C=m.left-t.event.x,p=Math.abs(C),v=m.top-t.event.y,u=Math.abs(v);if(t.event.mouse!==!0){if(p<t.sensitivity[1]&&u<t.sensitivity[1]){t.end(r);return}}else if(p<t.sensitivity[2]&&u<t.sensitivity[2])return;const y=p/s,h=u/s;t.direction.vertical===!0&&p<u&&p<100&&h>t.sensitivity[0]&&(t.event.dir=v<0?"up":"down"),t.direction.horizontal===!0&&p>u&&u<100&&y>t.sensitivity[0]&&(t.event.dir=C<0?"left":"right"),t.direction.up===!0&&p<u&&v<0&&p<100&&h>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&p<u&&v>0&&p<100&&h>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&p>u&&C<0&&u<100&&y>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&p>u&&C>0&&u<100&&y>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(K(r),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Se(),t.styleCleanup=q=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const l=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(l,50):l()}),t.handler({evt:r,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:s,distance:{x:p,y:u}})):t.end(r)},end(r){t.event!==void 0&&(U(t,"temp"),I.is.firefox===!0&&E(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),r!==void 0&&t.event.dir!==!1&&K(r),t.event=void 0)}};e.__qtouchswipe=t,c.mouse===!0&&B(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]]),I.has.touch===!0&&B(t,"main",[[e,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const a=e.__qtouchswipe;a!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&a.end(),a.handler=n.value),a.direction=te(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(U(n,"main"),U(n,"temp"),I.is.firefox===!0&&E(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});function pe(){const e=new Map;return{getCache:function(n,a){return e[n]===void 0?e[n]=a:e[n]},getCacheWithFn:function(n,a){return e[n]===void 0?e[n]=a():e[n]}}}const Ze={name:{required:!0},disable:Boolean},ae={setup(e,{slots:n}){return()=>d("div",{class:"q-panel scroll",role:"tabpanel"},w(n.default))}},Ge={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},et=["update:modelValue","before-transition","transition"];function tt(){const{props:e,emit:n,proxy:a}=L(),{getCacheWithFn:c}=pe();let o,t;const r=S(null),s=S(null);function m(i){const g=e.vertical===!0?"up":"left";A((a.$q.lang.rtl===!0?-1:1)*(i.direction===g?1:-1))}const C=f(()=>[[Je,m,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),v=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),u=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),y=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),h=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),q=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);W(()=>e.modelValue,(i,g)=>{const x=V(i)===!0?F(i):-1;t!==!0&&M(x===-1?0:x<F(g)?-1:1),r.value!==x&&(r.value=x,n("before-transition",i,g),le(()=>{n("transition",i,g)}))});function l(){A(1)}function b(){A(-1)}Object.assign(a,{next:l,previous:b,goTo:k});function k(i){n("update:modelValue",i)}function V(i){return i!=null&&i!==""}function F(i){return o.findIndex(g=>g.props.name===i&&g.props.disable!==""&&g.props.disable!==!0)}function me(){return o.filter(i=>i.props.disable!==""&&i.props.disable!==!0)}function M(i){const g=i!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(i===-1?p.value:v.value):null;s.value!==g&&(s.value=g)}function A(i,g=r.value){let x=g+i;for(;x>-1&&x<o.length;){const N=o[x];if(N!==void 0&&N.props.disable!==""&&N.props.disable!==!0){M(i),t=!0,n("update:modelValue",N.props.name),setTimeout(()=>{t=!1});return}x+=i}e.infinite===!0&&o.length>0&&g!==-1&&g!==o.length&&A(i,i===-1?o.length:-1)}function O(){const i=F(e.modelValue);return r.value!==i&&(r.value=i),!0}function X(){const i=V(e.modelValue)===!0&&O()&&o[r.value];return e.keepAlive===!0?[d(ue,h.value,[d(q.value===!0?c(y.value,()=>({...ae,name:y.value})):ae,{key:y.value,style:u.value},()=>i)])]:[d("div",{class:"q-panel scroll",style:u.value,key:y.value,role:"tabpanel"},[i])]}function ge(){if(o.length!==0)return e.animated===!0?[d(qe,{name:s.value},X)]:X()}function he(i){return o=ke(w(i.default,[])).filter(g=>g.props!==null&&g.props.slot===void 0&&V(g.props.name)===!0),o.length}function be(){return o}return{panelIndex:r,panelDirectives:C,updatePanelsList:he,updatePanelIndex:O,getPanelContent:ge,getEnabledPanels:me,getPanels:be,isValidPanelName:V,keepAliveProps:h,needsUniqueKeepAliveWrapper:q,goToPanelByOffset:A,goToPanel:k,nextPanel:l,previousPanel:b}}function fe(e){return d("div",{class:"q-stepper__step-content"},[d("div",{class:"q-stepper__step-inner"},w(e.default))])}const re={setup(e,{slots:n}){return()=>fe(n)}};var oe=D({name:"QStep",props:{...Ze,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean},setup(e,{slots:n}){const a=we(ce,()=>{console.error("QStep needs to be child of QStepper")}),{getCacheWithFn:c}=pe(),o=S(null),t=f(()=>a.value.modelValue===e.name);W(t,m=>{m===!0&&a.value.vertical===!0&&le(()=>{o.value!==null&&(o.value.scrollTop=0)})});const r=f(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function s(){const m=a.value.vertical;return m===!0&&a.value.keepAlive===!0?d(ue,a.value.keepAliveProps.value,t.value===!0?[d(a.value.needsUniqueKeepAliveWrapper.value===!0?c(r.value,()=>({...re,name:r.value})):re,{key:r.value},n.default)]:void 0):m!==!0||t.value===!0?fe(n):void 0}return()=>d("div",{ref:o,class:"q-stepper__step"},a.value.vertical===!0?[d(ve,{stepper:a.value,step:e,goToPanel:a.value.goToPanel}),a.value.animated===!0?d(Ae,s):s()]:[s()])}});const nt=/(-\w)/g;function at(e){const n={};for(const a in e){const c=a.replace(nt,o=>o[1].toUpperCase());n[c]=e[a]}return n}var rt=D({name:"QStepper",props:{...Ie,...Ge,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:et,setup(e,{slots:n}){const a=L(),c=Ve(e,a.proxy.$q),{updatePanelsList:o,isValidPanelName:t,updatePanelIndex:r,getPanelContent:s,getPanels:m,panelDirectives:C,goToPanel:p,keepAliveProps:v,needsUniqueKeepAliveWrapper:u}=tt();Ne(ce,f(()=>({goToPanel:p,keepAliveProps:v,needsUniqueKeepAliveWrapper:u,...e})));const y=f(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||c.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||c.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(c.value===!0?" q-stepper--dark q-dark":"")),h=f(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function q(){const l=w(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&r();const b=d("div",{class:"q-stepper__content"},w(n.default));return l===void 0?[b]:l.concat(b)}return[d("div",{class:h.value},m().map(b=>{const k=at(b.props);return d(ve,{key:k.name,stepper:e,step:k,goToPanel:p})})),l,Te("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>C.value)]}return()=>(o(n),d("div",{class:y.value},Be(n.navigation,q())))}}),ot=D({name:"QStepperNavigation",setup(e,{slots:n}){return()=>d("div",{class:"q-stepper__nav"},w(n.default))}});const ie={props:["step","backFunc","nextFunc"],render(){const e=d(Q,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),n=d(Q,{onClick:this.nextFunc,label:"Continue",color:"primary"});return d(ot,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<2?n:void 0])}},it={class:"flex flex-col justify-center space-y-2"},st={class:"flex justify-end pt-4 space-x-2"},lt=de({emits:["submit"],setup(e,{emit:n}){const a=$e({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),c=S(!1),o=S(),t=S(),r=S(1),s=S("");W(o,()=>{const v=new FileReader;v.readAsDataURL(o.value),v.onload=async()=>{await H.setImage(o.value.name,v.result),t.value=await H.getImage(o.value.name),a.image=o.value.name}});function m(){s.value="";const v=ee.safeParse(a);v.success?c.value=!0:(c.value=!0,r.value=1,s.value=v.error.issues[0].message)}function C(){const v=ee.safeParse(a);c.value&&v.success&&n("submit",v.data)}function p(){a.name="",Object.assign(a,{})}return Qe(()=>{p()}),(v,u)=>{const y=Ue;return $(),j(Ke,{flat:""},{default:P(()=>[_(Ee,null,{default:P(()=>[T("div",null,[_(y,{jsonable:R(a)},null,8,["jsonable"]),_(Oe,{ref:"profileForm",class:"relative",onReset:p},{default:P(()=>[T("div",null,[_(rt,{ref:"stepper",modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=h=>r.value=h),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:u[3]||(u[3]=J(G(h=>v.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:m},{default:P(()=>[_(oe,{name:1,title:"What's your name?",icon:"person_outline",error:!!s.value},{default:P(()=>[_(De,{modelValue:R(a).name,"onUpdate:modelValue":u[0]||(u[0]=h=>R(a).name=h),label:"Name",required:"",autofocus:"",error:!!s.value,"error-message":s.value,"bg-color":"secondary","label-color":"primary"},null,8,["modelValue","error","error-message"]),_(ie,{step:r.value,"back-func":()=>v.$refs.stepper.previous(),"next-func":()=>v.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),_(oe,{name:2,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:P(()=>[T("div",it,[t.value?($(),j(Fe,{key:0,src:t.value},null,8,["src"])):Z("",!0),_(Xe,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=h=>o.value=h),outlined:""},{prepend:P(()=>[_(se,{name:"attach_file"})]),_:1},8,["modelValue"])]),_(ie,{step:r.value,"back-func":()=>v.$refs.stepper.previous(),"next-func":()=>v.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),T("div",st,[_(Q,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),c.value?($(),j(Q,{key:0,label:"Submit",color:"primary",onClick:C,onKeydown:u[4]||(u[4]=J(G(()=>{},["prevent","stop"]),["enter"]))})):Z("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),ut={class:"w-full md:w-1/2 mx-auto"},ct=Me(" New Profile "),pt=de({setup(e){const n=je(),{setActiveProfile:a,profiles:c}=Re();function o(t){c.push(t),a(t),n.push("/profiles")}return(t,r)=>{const s=lt;return $(),Le("div",ut,[_(ze,null,{default:P(()=>[_(We,null,{default:P(()=>[ct]),_:1})]),_:1}),_(s,{onSubmit:o})])}}});export{pt as default};
