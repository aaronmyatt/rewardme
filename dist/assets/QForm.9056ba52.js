import{am as w,an as X,ao as Y,ap as H,aq as J,n as f,ar as Z,as as E,N as x,ab as $,at as ee,au as te,av as D,m as R,aw as ne,ax as ae,ay as le,az as ie,aA as ue,aB as oe,aC as re,aD as se,aE as L,aF as ce,aG as de,aH as fe,aI as ve,aJ as me,aK as ge,ai as he,aL as be,aM as ye,aN as Se,aO as xe,aP as Fe}from"./index.a953e485.js";const Ce={xs:8,sm:10,md:14,lg:20,xl:24},pe=w({name:"QChip",props:{...X,...Y,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:d,emit:S}){const{proxy:{$q:F}}=E(),o=H(e,F),c=J(e,Ce),v=f(()=>e.selected===!0||e.icon!==void 0),q=f(()=>e.selected===!0?e.iconSelected||F.iconSet.chip.selected:e.icon),z=f(()=>e.iconRemove||F.iconSet.chip.remove),k=f(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),B=f(()=>{const n=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(n?` text-${n} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(k.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(o.value===!0?" q-chip--dark q-dark":"")}),p=f(()=>{const n=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},_={...n,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||F.lang.label.remove};return{chip:n,remove:_}});function P(n){n.keyCode===13&&a(n)}function a(n){e.disable||(S("update:selected",!e.selected),S("click",n))}function h(n){(n.keyCode===void 0||n.keyCode===13)&&(D(n),e.disable===!1&&(S("update:modelValue",!1),S("remove")))}function r(){const n=[];k.value===!0&&n.push(x("div",{class:"q-focus-helper"})),v.value===!0&&n.push(x($,{class:"q-chip__icon q-chip__icon--left",name:q.value}));const _=e.label!==void 0?[x("div",{class:"ellipsis"},[e.label])]:void 0;return n.push(x("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ee(d.default,_))),e.iconRight&&n.push(x($,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&n.push(x($,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:z.value,...p.value.remove,onClick:h,onKeyup:h})),n}return()=>{if(e.modelValue===!1)return;const n={class:B.value,style:c.value};return k.value===!0&&Object.assign(n,p.value.chip,{onClick:a,onKeyup:P}),Z("div",n,r(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[te,e.ripple]])}}});function A(e,d,S,F){const o=[];return e.forEach(c=>{F(c)===!0?o.push(c):d.push({failedPropValidation:S,file:c})}),o}function N(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),D(e)}const qe={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ke=["rejected"];function _e({editable:e,dnd:d,getFileInput:S,addFilesToQueue:F}){const{props:o,emit:c,proxy:v}=E(),q=R(null),z=f(()=>o.accept!==void 0?o.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),k=f(()=>parseInt(o.maxFiles,10)),B=f(()=>parseInt(o.maxTotalSize,10));function p(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ne(t);else{const u=S();u&&u!==t.target&&u.click(t)}}function P(t){e.value&&t&&F(null,t)}function a(t,u,m,b){let i=Array.from(u||t.target.files);const y=[],I=()=>{y.length>0&&c("rejected",y)};if(o.accept!==void 0&&z.value.indexOf("*/")===-1&&(i=A(i,y,"accept",s=>z.value.some(g=>s.type.toUpperCase().startsWith(g)||s.name.toUpperCase().endsWith(g))),i.length===0))return I();if(o.maxFileSize!==void 0){const s=parseInt(o.maxFileSize,10);if(i=A(i,y,"max-file-size",g=>g.size<=s),i.length===0)return I()}if(o.multiple!==!0&&i.length>0&&(i=[i[0]]),i.forEach(s=>{s.__key=s.webkitRelativePath+s.lastModified+s.name+s.size}),b===!0){const s=m.map(g=>g.__key);i=A(i,y,"duplicate",g=>s.includes(g.__key)===!1)}if(i.length===0)return I();if(o.maxTotalSize!==void 0){let s=b===!0?m.reduce((g,O)=>g+O.size,0):0;if(i=A(i,y,"max-total-size",g=>(s+=g.size,s<=B.value)),i.length===0)return I()}if(typeof o.filter=="function"){const s=o.filter(i);i=A(i,y,"filter",g=>s.includes(g))}if(o.maxFiles!==void 0){let s=b===!0?m.length:0;if(i=A(i,y,"max-files",()=>(s++,s<=k.value)),i.length===0)return I()}if(I(),i.length>0)return i}function h(t){N(t),d.value!==!0&&(d.value=!0)}function r(t){D(t),(t.relatedTarget!==null||ae.is.safari!==!0?t.relatedTarget!==q.value:document.elementsFromPoint(t.clientX,t.clientY).includes(q.value)===!1)===!0&&(d.value=!1)}function n(t){N(t);const u=t.dataTransfer.files;u.length>0&&F(null,u),d.value=!1}function _(t){if(d.value===!0)return x("div",{ref:q,class:`q-${t}__dnd absolute-full`,onDragenter:N,onDragover:N,onDragleave:r,onDrop:n})}return Object.assign(v,{pickFiles:p,addFiles:P}),{pickFiles:p,addFiles:P,onDragover:h,onDragleave:r,processFiles:a,getDndNode:_,maxFilesNumber:k,maxTotalSizeNumber:B}}const M=["B","KB","MB","GB","TB","PB"];function Ve(e){let d=0;for(;parseInt(e,10)>=1024&&d<M.length-1;)e/=1024,++d;return`${e.toFixed(1)}${M[d]}`}const Be=w({name:"QFile",inheritAttrs:!1,props:{...le,...ie,...qe,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ue,...ke],setup(e,{slots:d,emit:S,attrs:F}){const{proxy:o}=E(),c=oe(),v=R(null),q=R(!1),z=re(e),{pickFiles:k,onDragover:B,onDragleave:p,processFiles:P,getDndNode:a}=_e({editable:c.editable,dnd:q,getFileInput:Q,addFilesToQueue:K}),h=se(e),r=f(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),n=f(()=>L(r.value)),_=f(()=>r.value.map(l=>l.name).join(", ")),t=f(()=>Ve(r.value.reduce((l,C)=>l+C.size,0))),u=f(()=>({totalSize:t.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),m=f(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:z.value,...F,id:c.targetUid.value,disabled:c.editable.value!==!0})),b=f(()=>"q-file q-field--auto-height"+(q.value===!0?" q-file--dnd":"")),i=f(()=>e.multiple===!0&&e.append===!0);function y(l){const C=r.value.slice();C.splice(l,1),s(C)}function I(l){const C=r.value.findIndex(l);C>-1&&y(C)}function s(l){S("update:modelValue",e.multiple===!0?l:l[0])}function g(l){l.keyCode===13&&fe(l)}function O(l){(l.keyCode===13||l.keyCode===32)&&k(l)}function Q(){return v.value}function K(l,C){const V=P(l,C,r.value,i.value),T=Q();T!=null&&(T.value=""),V!==void 0&&((e.multiple===!0?e.modelValue&&V.every(G=>r.value.includes(G)):e.modelValue===V[0])||s(i.value===!0?r.value.concat(V):V))}function j(){return[x("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function U(){if(d.file!==void 0)return r.value.length===0?j():r.value.map((C,V)=>d.file({index:V,file:C,ref:this}));if(d.selected!==void 0)return r.value.length===0?j():d.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?j():r.value.map((C,V)=>x(pe,{key:"file-"+V,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{y(V)}},()=>x("span",{class:"ellipsis",textContent:C.name})));const l=e.displayValue!==void 0?e.displayValue:_.value;return l.length>0?[x("div",{class:e.inputClass,style:e.inputStyle,textContent:l})]:j()}function W(){const l={ref:v,...m.value,...h.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:K};return e.multiple===!0&&(l.multiple=!0),x("input",l)}return Object.assign(c,{fieldClass:b,emitValue:s,hasValue:n,inputRef:v,innerValue:r,floatingLabel:f(()=>n.value===!0||L(e.displayValue)),computedCounter:f(()=>{if(e.counterLabel!==void 0)return e.counterLabel(u.value);const l=e.maxFiles;return`${r.value.length}${l!==void 0?" / "+l:""} (${t.value})`}),getControlChild:()=>a("file"),getControl:()=>{const l={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(l,{onDragover:B,onDragleave:p,onKeydown:g,onKeyup:O}),x("div",l,[W()].concat(U()))}}),Object.assign(o,{removeAtIndex:y,removeFile:I,getNativeElement:()=>v.value}),ce(o,"nativeEl",()=>v.value),de(c)}}),Pe=w({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:d,emit:S}){const F=E(),o=R(null);let c=0;const v=[];function q(a){const h=typeof a=="boolean"?a:e.noErrorFocus!==!0,r=++c,n=(u,m)=>{S("validation"+(u===!0?"Success":"Error"),m)},_=u=>{const m=u.validate();return typeof m.then=="function"?m.then(b=>({valid:b,comp:u}),b=>({valid:!1,comp:u,err:b})):Promise.resolve({valid:m,comp:u})};return(e.greedy===!0?Promise.all(v.map(_)).then(u=>u.filter(m=>m.valid!==!0)):v.reduce((u,m)=>u.then(()=>_(m).then(b=>{if(b.valid===!1)return Promise.reject(b)})),Promise.resolve()).catch(u=>[u])).then(u=>{if(u===void 0||u.length===0)return r===c&&n(!0),!0;if(r===c){const{comp:m,err:b}=u[0];if(b!==void 0&&console.error(b),n(!1,m),h===!0){const i=u.find(({comp:y})=>typeof y.focus=="function"&&ye(y.$)===!1);i!==void 0&&i.comp.focus()}}return!1})}function z(){c++,v.forEach(a=>{typeof a.resetValidation=="function"&&a.resetValidation()})}function k(a){a!==void 0&&D(a);const h=c+1;q().then(r=>{h===c&&r===!0&&(e.onSubmit!==void 0?S("submit",a):a!==void 0&&a.target!==void 0&&typeof a.target.submit=="function"&&a.target.submit())})}function B(a){a!==void 0&&D(a),S("reset"),Se(()=>{z(),e.autofocus===!0&&e.noResetFocus!==!0&&p()})}function p(){xe(()=>{if(o.value===null)return;const a=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),h=>h.tabIndex>-1);a!=null&&a.focus({preventScroll:!0})})}ve(Fe,{bindComponent(a){v.push(a)},unbindComponent(a){const h=v.indexOf(a);h>-1&&v.splice(h,1)}});let P=!1;return me(()=>{P=!0}),ge(()=>{P===!0&&e.autofocus===!0&&p()}),he(()=>{e.autofocus===!0&&p()}),Object.assign(F.proxy,{validate:q,resetValidation:z,submit:k,reset:B,focus:p,getValidationComponents:()=>v}),()=>x("form",{class:"q-form",ref:o,onSubmit:k,onReset:B},be(d.default))}});export{Pe as Q,Be as a};
