import{a9 as D,n as P,A as m,C as p,$ as ie,aC as _e,ag as ye,s as F,aK as Ce,aj as A,aL as xe,aM as Se,aN as N,aO as K,aP as Y,ah as U,aQ as Pe,aR as j,p as le,x as qe,aS as we,aT as ke,ay as k,aU as ue,aH as Ie,aI as R,aV as ce,aW as Ae,aa as Te,ac as Ve,au as Ne,aX as $e,ae as Be,h as Q,d as de,D as Qe,X as H,Y as De,F as L,w as S,b as y,a as $,e as W,aY as J,Z as Fe,a0 as Ee,a6 as Z,a1 as Ke,a2 as Ue,a3 as G,a4 as je,o as B,aZ as ee,u as Re,J as Le,c as We,g as Me,f as ze,U as Oe}from"./index.a9189950.js";import{Q as Xe,a as Ye}from"./QForm.2ec3a150.js";const pe=D({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:t}){const{proxy:{$q:o}}=F(),d=P(null),a=m(()=>e.stepper.modelValue===e.step.name),n=m(()=>{const s=e.step.disable;return s===!0||s===""}),r=m(()=>{const s=e.step.error;return s===!0||s===""}),u=m(()=>{const s=e.step.done;return n.value===!1&&(s===!0||s==="")}),g=m(()=>{const s=e.step.headerNav,f=s===!0||s===""||s===void 0;return n.value===!1&&e.stepper.headerNav&&f}),b=m(()=>e.step.prefix&&(a.value===!1||e.stepper.activeIcon==="none")&&(r.value===!1||e.stepper.errorIcon==="none")&&(u.value===!1||e.stepper.doneIcon==="none")),v=m(()=>{const s=e.step.icon||e.stepper.inactiveIcon;if(a.value===!0){const f=e.step.activeIcon||e.stepper.activeIcon;return f==="none"?s:f||o.iconSet.stepper.active}if(r.value===!0){const f=e.step.errorIcon||e.stepper.errorIcon;return f==="none"?s:f||o.iconSet.stepper.error}if(n.value===!1&&u.value===!0){const f=e.step.doneIcon||e.stepper.doneIcon;return f==="none"?s:f||o.iconSet.stepper.done}return s}),c=m(()=>{const s=r.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(a.value===!0){const f=e.step.activeColor||e.stepper.activeColor||e.step.color;return f!==void 0?f:s}return s!==void 0?s:n.value===!1&&u.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),i=m(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(c.value!==void 0?` text-${c.value}`:"")+(r.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(b.value===!0?"prefix":"icon"):"")+(a.value===!0?" q-stepper__tab--active":"")+(u.value===!0?" q-stepper__tab--done":"")+(g.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(n.value===!0?" q-stepper__tab--disabled":"")),C=m(()=>e.stepper.headerNav!==!0?!1:g.value);function _(){d.value!==null&&d.value.focus(),a.value===!1&&e.goToPanel(e.step.name)}function q(s){s.keyCode===13&&a.value===!1&&e.goToPanel(e.step.name)}return()=>{const s={class:i.value};g.value===!0&&(s.onClick=_,s.onKeyup=q,Object.assign(s,n.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0}));const f=[p("div",{class:"q-focus-helper",tabindex:-1,ref:d}),p("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[p("span",{class:"row flex-center"},[b.value===!0?e.step.prefix:p(ie,{name:v.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const w=[p("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&w.push(p("div",{class:"q-stepper__caption"},e.step.caption)),f.push(p("div",{class:"q-stepper__label q-stepper__line relative-position"},w))}return _e(p("div",s,f),[[ye,C.value]])}}}),M={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},He=Object.keys(M);M.all=!0;function te(e){const t={};for(const o of He)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?M:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function ne(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Je(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,d)=>{const a=parseFloat(o);a&&(t[d]=a)}),t}const Ze=Ce({name:"touch-swipe",beforeMount(e,{value:t,arg:o,modifiers:d}){if(d.mouse!==!0&&A.has.touch!==!0)return;const a=d.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:Je(o),direction:te(d),noop:xe,mouseStart(r){ne(r,n)&&Se(r)&&(N(n,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(r,!0))},touchStart(r){if(ne(r,n)){const u=r.target;N(n,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),n.start(r)}},start(r,u){A.is.firefox===!0&&K(e,!0);const g=Y(r);n.event={x:g.left,y:g.top,time:Date.now(),mouse:u===!0,dir:!1}},move(r){if(n.event===void 0)return;if(n.event.dir!==!1){U(r);return}const u=Date.now()-n.event.time;if(u===0)return;const g=Y(r),b=g.left-n.event.x,v=Math.abs(b),c=g.top-n.event.y,i=Math.abs(c);if(n.event.mouse!==!0){if(v<n.sensitivity[1]&&i<n.sensitivity[1]){n.end(r);return}}else if(v<n.sensitivity[2]&&i<n.sensitivity[2])return;const C=v/u,_=i/u;n.direction.vertical===!0&&v<i&&v<100&&_>n.sensitivity[0]&&(n.event.dir=c<0?"up":"down"),n.direction.horizontal===!0&&v>i&&i<100&&C>n.sensitivity[0]&&(n.event.dir=b<0?"left":"right"),n.direction.up===!0&&v<i&&c<0&&v<100&&_>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&v<i&&c>0&&v<100&&_>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&v>i&&b<0&&i<100&&C>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&v>i&&b>0&&i<100&&C>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(U(r),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Pe(),n.styleCleanup=q=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const s=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(s,50):s()}),n.handler({evt:r,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:u,distance:{x:v,y:i}})):n.end(r)},end(r){n.event!==void 0&&(j(n,"temp"),A.is.firefox===!0&&K(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),r!==void 0&&n.event.dir!==!1&&U(r),n.event=void 0)}};if(e.__qtouchswipe=n,d.mouse===!0){const r=d.mouseCapture===!0||d.mousecapture===!0?"Capture":"";N(n,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}A.has.touch===!0&&N(n,"main",[[e,"touchstart","touchStart",`passive${d.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchswipe;o!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&o.end(),o.handler=t.value),o.direction=te(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(j(t,"main"),j(t,"temp"),A.is.firefox===!0&&K(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function ve(){const e=new Map;return{getCache:function(t,o){return e[t]===void 0?e[t]=o:e[t]},getCacheWithFn:function(t,o){return e[t]===void 0?e[t]=o():e[t]}}}const Ge={name:{required:!0},disable:Boolean},ae={setup(e,{slots:t}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},k(t.default))}},et={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},tt=["update:modelValue","beforeTransition","transition"];function nt(){const{props:e,emit:t,proxy:o}=F(),{getCacheWithFn:d}=ve();let a,n;const r=P(null),u=P(null);function g(l){const h=e.vertical===!0?"up":"left";I((o.$q.lang.rtl===!0?-1:1)*(l.direction===h?1:-1))}const b=m(()=>[[Ze,g,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),c=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),i=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),C=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),_=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),q=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);le(()=>e.modelValue,(l,h)=>{const x=T(l)===!0?E(l):-1;n!==!0&&z(x===-1?0:x<E(h)?-1:1),r.value!==x&&(r.value=x,t("beforeTransition",l,h),qe(()=>{t("transition",l,h)}))});function s(){I(1)}function f(){I(-1)}function w(l){t("update:modelValue",l)}function T(l){return l!=null&&l!==""}function E(l){return a.findIndex(h=>h.props.name===l&&h.props.disable!==""&&h.props.disable!==!0)}function me(){return a.filter(l=>l.props.disable!==""&&l.props.disable!==!0)}function z(l){const h=l!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(l===-1?v.value:c.value):null;u.value!==h&&(u.value=h)}function I(l,h=r.value){let x=h+l;for(;x>-1&&x<a.length;){const V=a[x];if(V!==void 0&&V.props.disable!==""&&V.props.disable!==!0){z(l),n=!0,t("update:modelValue",V.props.name),setTimeout(()=>{n=!1});return}x+=l}e.infinite===!0&&a.length>0&&h!==-1&&h!==a.length&&I(l,l===-1?a.length:-1)}function O(){const l=E(e.modelValue);return r.value!==l&&(r.value=l),!0}function X(){const l=T(e.modelValue)===!0&&O()&&a[r.value];return e.keepAlive===!0?[p(ue,_.value,[p(q.value===!0?d(C.value,()=>({...ae,name:C.value})):ae,{key:C.value,style:i.value},()=>l)])]:[p("div",{class:"q-panel scroll",style:i.value,key:C.value,role:"tabpanel"},[l])]}function he(){if(a.length!==0)return e.animated===!0?[p(we,{name:u.value},X)]:X()}function ge(l){return a=ke(k(l.default,[])).filter(h=>h.props!==null&&h.props.slot===void 0&&T(h.props.name)===!0),a.length}function be(){return a}return Object.assign(o,{next:s,previous:f,goTo:w}),{panelIndex:r,panelDirectives:b,updatePanelsList:ge,updatePanelIndex:O,getPanelContent:he,getEnabledPanels:me,getPanels:be,isValidPanelName:T,keepAliveProps:_,needsUniqueKeepAliveWrapper:q,goToPanelByOffset:I,goToPanel:w,nextPanel:s,previousPanel:f}}function fe(e){return p("div",{class:"q-stepper__step-content"},[p("div",{class:"q-stepper__step-inner"},k(e.default))])}const re={setup(e,{slots:t}){return()=>fe(t)}},oe=D({name:"QStep",props:{...Ge,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:t,emit:o}){const{proxy:{$q:d}}=F(),a=Ie(ce,R);if(a===R)return console.error("QStep needs to be a child of QStepper"),R;const{getCacheWithFn:n}=ve(),r=P(null),u=m(()=>a.value.modelValue===e.name),g=m(()=>d.platform.is.ios!==!0&&d.platform.is.chrome===!0||u.value!==!0||a.value.vertical!==!0?{}:{onScroll(c){const{target:i}=c;i.scrollTop>0&&(i.scrollTop=0),e.onScroll!==void 0&&o("scroll",c)}}),b=m(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function v(){const c=a.value.vertical;return c===!0&&a.value.keepAlive===!0?p(ue,a.value.keepAliveProps.value,u.value===!0?[p(a.value.needsUniqueKeepAliveWrapper.value===!0?n(b.value,()=>({...re,name:b.value})):re,{key:b.value},t.default)]:void 0):c!==!0||u.value===!0?fe(t):void 0}return()=>p("div",{ref:r,class:"q-stepper__step",role:"tabpanel",...g.value},a.value.vertical===!0?[p(pe,{stepper:a.value,step:e,goToPanel:a.value.goToPanel}),a.value.animated===!0?p(Ae,v):v()]:[v()])}}),at=/(-\w)/g;function rt(e){const t={};for(const o in e){const d=o.replace(at,a=>a[1].toUpperCase());t[d]=e[o]}return t}const ot=D({name:"QStepper",props:{...Te,...et,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:tt,setup(e,{slots:t}){const o=F(),d=Ve(e,o.proxy.$q),{updatePanelsList:a,isValidPanelName:n,updatePanelIndex:r,getPanelContent:u,getPanels:g,panelDirectives:b,goToPanel:v,keepAliveProps:c,needsUniqueKeepAliveWrapper:i}=nt();Ne(ce,m(()=>({goToPanel:v,keepAliveProps:c,needsUniqueKeepAliveWrapper:i,...e})));const C=m(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||d.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||d.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(d.value===!0?" q-stepper--dark q-dark":"")),_=m(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function q(){const s=k(t.message,[]);if(e.vertical===!0){n(e.modelValue)&&r();const f=p("div",{class:"q-stepper__content"},k(t.default));return s===void 0?[f]:s.concat(f)}return[p("div",{class:_.value},g().map(f=>{const w=rt(f.props);return p(pe,{key:w.name,stepper:e,step:w,goToPanel:v})})),s,Be("div",{class:"q-stepper__content q-panel-parent"},u(),"cont",e.swipeable,()=>b.value)]}return()=>(a(t),p("div",{class:C.value},$e(t.navigation,q())))}}),st=D({name:"QStepperNavigation",setup(e,{slots:t}){return()=>p("div",{class:"q-stepper__nav"},k(t.default))}}),se={props:["step","backFunc","nextFunc"],render(){const e=p(Q,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),t=p(Q,{onClick:this.nextFunc,label:"Continue",color:"primary"});return p(st,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<2?t:void 0])}},it={class:"flex flex-col justify-center space-y-2"},lt={class:"flex justify-end pt-4 space-x-2"},ut=de({emits:["submit"],setup(e,{emit:t}){const o=Qe({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),d=P(!1),a=P(),n=P(),r=P(1),u=P("");le(a,()=>{const c=new FileReader;c.readAsDataURL(a.value),c.onload=async()=>{await H.setImage(a.value.name,c.result),n.value=await H.getImage(a.value.name),o.image=a.value.name}});function g(){u.value="";const c=G.safeParse(o);c.success?d.value=!0:(d.value=!0,r.value=1,u.value=c.error.issues[0].message)}function b(){const c=G.safeParse(o);d.value&&c.success&&t("submit",c.data)}function v(){o.name="",Object.assign(o,{})}return De(()=>{v()}),(c,i)=>{const C=je;return B(),L(Ue,{flat:""},{default:S(()=>[y(Ke,null,{default:S(()=>[$("div",null,[y(C,{jsonable:W(o)},null,8,["jsonable"]),y(Xe,{ref:"profileForm",class:"relative",onReset:v},{default:S(()=>[$("div",null,[y(ot,{ref:"stepper",modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=_=>r.value=_),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:i[3]||(i[3]=J(ee(_=>c.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:g},{default:S(()=>[y(oe,{name:1,title:"What's your name?",icon:"person_outline",error:!!u.value},{default:S(()=>[y(Fe,{modelValue:W(o).name,"onUpdate:modelValue":i[0]||(i[0]=_=>W(o).name=_),label:"Name",required:"",autofocus:"",error:!!u.value,"error-message":u.value,"bg-color":"secondary","label-color":"primary"},null,8,["modelValue","error","error-message"]),y(se,{step:r.value,"back-func":()=>c.$refs.stepper.previous(),"next-func":()=>c.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),y(oe,{name:2,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:S(()=>[$("div",it,[n.value?(B(),L(Ee,{key:0,src:n.value},null,8,["src"])):Z("",!0),y(Ye,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=_=>a.value=_),outlined:""},{prepend:S(()=>[y(ie,{name:"attach_file"})]),_:1},8,["modelValue"])]),y(se,{step:r.value,"back-func":()=>c.$refs.stepper.previous(),"next-func":()=>c.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),$("div",lt,[y(Q,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),d.value?(B(),L(Q,{key:0,label:"Submit",color:"primary",onClick:b,onKeydown:i[4]||(i[4]=J(ee(()=>{},["prevent","stop"]),["enter"]))})):Z("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),ct={class:"w-full md:w-1/2 mx-auto"},dt=Oe(" New Profile "),ft=de({setup(e){const t=Re(),{setActiveProfile:o,profiles:d}=Le();function a(n){d.push(n),o(n),t.push("/profiles")}return(n,r)=>{const u=ut;return B(),We("div",ct,[y(ze,null,{default:S(()=>[y(Me,null,{default:S(()=>[dt]),_:1})]),_:1}),y(u,{onSubmit:a})])}}});export{ft as default};
