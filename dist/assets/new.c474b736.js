import{f as z,Q as H,a as I,b as J,_ as M}from"./QForm.cd13a8df.js";import{h as $,r as y,j as f,l as o,y as K,Z as G,ai as Z,m as U,L as X,w as W,a_ as R,ab as Y,az as ee,I as V,J as te,K as ae,aj as ne,a$ as re,ah as le,B as w,d as O,n as oe,p as B,q as se,o as N,s as T,v as b,g as n,f as P,e as m,b0 as j,x as ue,A as ie,F as ce,P as A,b1 as D,D as pe,c as de,E as ve,G as fe}from"./index.4812fb8c.js";import{u as me,b as be,c as _e,d as ge,e as he,Q as ye,a as ke}from"./QColor.4eceff38.js";import{Q as Ce,a as Se}from"./QCard.99d08e02.js";import{Q as qe}from"./QToolbarTitle.27f6ef7c.js";import{u as xe}from"./useProfiles.a5a65976.js";import"./QItemLabel.2b01d031.js";const E=$({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:s}){const{proxy:{$q:t}}=U(),p=y(null),l=f(()=>e.stepper.modelValue===e.step.name),c=f(()=>{const r=e.step.disable;return r===!0||r===""}),i=f(()=>{const r=e.step.error;return r===!0||r===""}),d=f(()=>{const r=e.step.done;return c.value===!1&&(r===!0||r==="")}),_=f(()=>{const r=e.step.headerNav,g=r===!0||r===""||r===void 0;return c.value===!1&&e.stepper.headerNav&&g}),S=f(()=>e.step.prefix&&l.value===!1&&i.value===!1&&d.value===!1),h=f(()=>l.value===!0?e.step.activeIcon||e.stepper.activeIcon||t.iconSet.stepper.active:i.value===!0?e.step.errorIcon||e.stepper.errorIcon||t.iconSet.stepper.error:c.value===!1&&d.value===!0?e.step.doneIcon||e.stepper.doneIcon||t.iconSet.stepper.done:e.step.icon||e.stepper.inactiveIcon),a=f(()=>{const r=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(l.value===!0){const g=e.step.activeColor||e.stepper.activeColor||e.step.color;return g!==void 0?g:r}return r!==void 0?r:c.value===!1&&d.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),u=f(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(a.value!==void 0?` text-${a.value}`:"")+(i.value===!0?" q-stepper__tab--error":"")+(l.value===!0?" q-stepper__tab--active":"")+(d.value===!0?" q-stepper__tab--done":"")+(_.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(c.value===!0?" q-stepper__tab--disabled":"")),q=f(()=>e.stepper.headerNav!==!0?!1:_.value);function v(){p.value!==null&&p.value.focus(),l.value===!1&&e.goToPanel(e.step.name)}function Q(r){r.keyCode===13&&l.value===!1&&e.goToPanel(e.step.name)}return()=>{const r={class:u.value};_.value===!0&&(r.onClick=v,r.onKeyup=Q,Object.assign(r,c.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:s.tabindex||0}));const g=[o("div",{class:"q-focus-helper",tabindex:-1,ref:p}),o("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[o("span",{class:"row flex-center"},[S.value===!0?e.step.prefix:o(K,{name:h.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const x=[o("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&x.push(o("div",{class:"q-stepper__caption"},e.step.caption)),g.push(o("div",{class:"q-stepper__label q-stepper__line relative-position"},x))}return G(o("div",r,g),[[Z,q.value]])}}});function L(e){return o("div",{class:"q-stepper__step-content"},[o("div",{class:"q-stepper__step-inner"},V(e.default))])}const F={setup(e,{slots:s}){return()=>L(s)}},k=$({name:"QStep",props:{...me,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean},setup(e,{slots:s}){const t=X(R,()=>{console.error("QStep needs to be child of QStepper")}),{getCacheWithFn:p}=be(),l=y(null),c=f(()=>t.value.modelValue===e.name);W(c,_=>{_===!0&&t.value.vertical===!0&&Y(()=>{l.value!==null&&(l.value.scrollTop=0)})});const i=f(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function d(){const _=t.value.vertical;return _===!0&&t.value.keepAlive===!0?o(ee,t.value.keepAliveProps.value,c.value===!0?[o(t.value.needsUniqueKeepAliveWrapper.value===!0?p(i.value,()=>({...F,name:i.value})):F,{key:i.value},s.default)]:void 0):_!==!0||c.value===!0?L(s):void 0}return()=>o("div",{ref:l,class:"q-stepper__step"},t.value.vertical===!0?[o(E,{stepper:t.value,step:e,goToPanel:t.value.goToPanel}),t.value.animated===!0?o(z,d):d()]:[d()])}}),Pe=/(-\w)/g;function Ve(e){const s={};for(const t in e){const p=t.replace(Pe,l=>l[1].toUpperCase());s[p]=e[t]}return s}const we=$({name:"QStepper",props:{...te,..._e,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:ge,setup(e,{slots:s}){const t=U(),p=ae(e,t.proxy.$q),{updatePanelsList:l,isValidPanelName:c,updatePanelIndex:i,getPanelContent:d,getPanels:_,panelDirectives:S,goToPanel:h,keepAliveProps:a,needsUniqueKeepAliveWrapper:u}=he();ne(R,f(()=>({goToPanel:h,keepAliveProps:a,needsUniqueKeepAliveWrapper:u,...e})));const q=f(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||p.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||p.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(p.value===!0?" q-stepper--dark q-dark":"")),v=f(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function Q(){const r=V(s.message,[]);if(e.vertical===!0){c(e.modelValue)&&i();const g=o("div",{class:"q-stepper__content"},V(s.default));return r===void 0?[g]:r.concat(g)}return[o("div",{class:v.value},_().map(g=>{const x=Ve(g.props);return o(E,{key:x.name,stepper:e,step:x,goToPanel:h})})),r,le("div",{class:"q-stepper__content q-panel-parent"},d(),"cont",e.swipeable,()=>S.value)]}return()=>(l(s),o("div",{class:q.value},re(s.navigation,Q())))}}),$e=$({name:"QStepperNavigation",setup(e,{slots:s}){return()=>o("div",{class:"q-stepper__nav"},V(s.default))}}),C={props:["step","backFunc","nextFunc"],render(){const e=o(w,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),s=o(w,{onClick:this.nextFunc,label:"Continue",color:"primary"});return o($e,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<6?s:void 0])}},Qe={class:"flex justify-center space-y-2"},Ie={class:"flex justify-end pt-4 space-x-2"},Ne=O({emits:["submit"],setup(e,{emit:s}){const t=oe({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),p=y(!1),l=y(),c=y(),i=y(1),d=y("");W(l,()=>{const a=new FileReader;a.readAsDataURL(l.value),a.onload=async()=>{await B.setImage(l.value.name,a.result),c.value=await B.getImage(l.value.name),t.image=l.value.name}});function _(){d.value="";const a=A.safeParse(t);a.success?p.value=!0:(p.value=!0,i.value=1,d.value=a.error.issues[0].message)}function S(){const a=A.safeParse(t);p.value&&a.success&&s("submit",a.data)}function h(){t.name="",Object.assign(t,{})}return se(()=>{h()}),(a,u)=>{const q=M;return N(),T(Se,{flat:""},{default:b(()=>[n(Ce,null,{default:b(()=>[P("div",null,[n(q,{jsonable:m(t)},null,8,["jsonable"]),n(H,{ref:"profileForm",class:"relative",onReset:h},{default:b(()=>[P("div",null,[n(we,{ref:"stepper",modelValue:i.value,"onUpdate:modelValue":u[6]||(u[6]=v=>i.value=v),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:u[7]||(u[7]=j(D(v=>a.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:_},{default:b(()=>[n(k,{name:1,title:"What's your name?",icon:"person_outline",error:!!d.value},{default:b(()=>[n(I,{modelValue:m(t).name,"onUpdate:modelValue":u[0]||(u[0]=v=>m(t).name=v),label:"Name",required:"","stack-label":"",autofocus:"",error:!!d.value,"error-message":d.value},null,8,["modelValue","error","error-message"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),n(k,{name:2,title:"Do you have a nickname?",caption:"Optional",icon:"sentiment_very_satisfied"},{default:b(()=>[n(I,{modelValue:m(t).nickname,"onUpdate:modelValue":u[1]||(u[1]=v=>m(t).nickname=v),label:"Nickname",required:"","stack-label":"",autofocus:""},null,8,["modelValue"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(k,{name:3,title:"What's your favourite thing to do?",icon:"attractions",caption:"Optional"},{default:b(()=>[n(I,{modelValue:m(t).hobby,"onUpdate:modelValue":u[2]||(u[2]=v=>m(t).hobby=v),label:"Hobby","stack-label":"",autofocus:""},null,8,["modelValue"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(k,{name:4,title:"When is your birthday?",icon:"event",class:"flex justify-center",caption:"Optional"},{default:b(()=>[n(ye,{modelValue:m(t).dateofbirth,"onUpdate:modelValue":u[3]||(u[3]=v=>m(t).dateofbirth=v),flat:"",minimal:"",landscape:a.$q.screen.gt.sm},null,8,["modelValue","landscape"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(k,{name:5,title:"What's your favourite colour?",caption:"Optional",icon:"palette",class:"flex justify-center"},{default:b(()=>[P("div",{style:ue({backgroundColor:m(t).color+"70",borderWidth:"5px",borderColor:m(t).color})},[n(ke,{modelValue:m(t).color,"onUpdate:modelValue":u[4]||(u[4]=v=>m(t).color=v),square:"",w:"300px",flat:"","no-footer":"","no-header":"","default-view":"palette","format-model":"hex"},null,8,["modelValue"])],4),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(k,{name:6,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:b(()=>[P("div",Qe,[n(ie,{class:"w-1/2",src:c.value},null,8,["src"]),n(J,{modelValue:l.value,"onUpdate:modelValue":u[5]||(u[5]=v=>l.value=v),outlined:""},{prepend:b(()=>[n(K,{name:"attach_file"})]),_:1},8,["modelValue"])]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),P("div",Ie,[n(w,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),p.value?(N(),T(w,{key:0,label:"Submit",color:"primary",onClick:S,onKeydown:u[8]||(u[8]=j(D(()=>{},["prevent","stop"]),["enter"]))})):ce("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),Be={class:"w-full md:w-1/2 mx-auto"},Te=fe(" New Profile "),Re=O({setup(e){const s=pe(),{setActiveProfile:t,profiles:p}=xe();function l(c){p.push(c),t(c),s.push("/profiles")}return(c,i)=>{const d=Ne;return N(),de("div",Be,[n(ve,null,{default:b(()=>[n(qe,null,{default:b(()=>[Te]),_:1})]),_:1}),n(d,{onSubmit:l})])}}});export{Re as default};
