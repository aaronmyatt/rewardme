import{f as z,Q as H,a as Q,b as M,_ as J}from"./QForm.297dedd2.js";import{m as $,r as k,g as f,h as o,z as U,a1 as G,an as X,j as F,i as Z,b3 as W,w as R,ag as Y,aE as ee,a3 as V,X as te,Z as ae,ao as ne,b4 as re,am as le,C as w,d as E,q as oe,s as B,f as se,o as N,v as T,x as b,k as n,l as P,b as m,b5 as D,y as ue,B as ie,L as ce,D as pe,E as de,P as j,b6 as A,I as ve,G as fe,c as me,J as be,K as ge,M as _e}from"./index.1a72c973.js";import{u as he,b as ke,c as ye,d as Ce,e as Se,Q as qe,a as xe}from"./QColor.a0008af8.js";import"./QItemLabel.c315d98c.js";const O=$({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:s}){const{proxy:{$q:t}}=F(),p=k(null),l=f(()=>e.stepper.modelValue===e.step.name),c=f(()=>{const r=e.step.disable;return r===!0||r===""}),i=f(()=>{const r=e.step.error;return r===!0||r===""}),d=f(()=>{const r=e.step.done;return c.value===!1&&(r===!0||r==="")}),g=f(()=>{const r=e.step.headerNav,_=r===!0||r===""||r===void 0;return c.value===!1&&e.stepper.headerNav&&_}),S=f(()=>e.step.prefix&&l.value===!1&&i.value===!1&&d.value===!1),h=f(()=>l.value===!0?e.step.activeIcon||e.stepper.activeIcon||t.iconSet.stepper.active:i.value===!0?e.step.errorIcon||e.stepper.errorIcon||t.iconSet.stepper.error:c.value===!1&&d.value===!0?e.step.doneIcon||e.stepper.doneIcon||t.iconSet.stepper.done:e.step.icon||e.stepper.inactiveIcon),a=f(()=>{const r=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(l.value===!0){const _=e.step.activeColor||e.stepper.activeColor||e.step.color;return _!==void 0?_:r}return r!==void 0?r:c.value===!1&&d.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),u=f(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(a.value!==void 0?` text-${a.value}`:"")+(i.value===!0?" q-stepper__tab--error":"")+(l.value===!0?" q-stepper__tab--active":"")+(d.value===!0?" q-stepper__tab--done":"")+(g.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(c.value===!0?" q-stepper__tab--disabled":"")),q=f(()=>e.stepper.headerNav!==!0?!1:g.value);function v(){p.value!==null&&p.value.focus(),l.value===!1&&e.goToPanel(e.step.name)}function I(r){r.keyCode===13&&l.value===!1&&e.goToPanel(e.step.name)}return()=>{const r={class:u.value};g.value===!0&&(r.onClick=v,r.onKeyup=I,Object.assign(r,c.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:s.tabindex||0}));const _=[o("div",{class:"q-focus-helper",tabindex:-1,ref:p}),o("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[o("span",{class:"row flex-center"},[S.value===!0?e.step.prefix:o(U,{name:h.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const x=[o("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&x.push(o("div",{class:"q-stepper__caption"},e.step.caption)),_.push(o("div",{class:"q-stepper__label q-stepper__line relative-position"},x))}return G(o("div",r,_),[[X,q.value]])}}});function L(e){return o("div",{class:"q-stepper__step-content"},[o("div",{class:"q-stepper__step-inner"},V(e.default))])}const K={setup(e,{slots:s}){return()=>L(s)}},y=$({name:"QStep",props:{...he,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean},setup(e,{slots:s}){const t=Z(W,()=>{console.error("QStep needs to be child of QStepper")}),{getCacheWithFn:p}=ke(),l=k(null),c=f(()=>t.value.modelValue===e.name);R(c,g=>{g===!0&&t.value.vertical===!0&&Y(()=>{l.value!==null&&(l.value.scrollTop=0)})});const i=f(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function d(){const g=t.value.vertical;return g===!0&&t.value.keepAlive===!0?o(ee,t.value.keepAliveProps.value,c.value===!0?[o(t.value.needsUniqueKeepAliveWrapper.value===!0?p(i.value,()=>({...K,name:i.value})):K,{key:i.value},s.default)]:void 0):g!==!0||c.value===!0?L(s):void 0}return()=>o("div",{ref:l,class:"q-stepper__step"},t.value.vertical===!0?[o(O,{stepper:t.value,step:e,goToPanel:t.value.goToPanel}),t.value.animated===!0?o(z,d):d()]:[d()])}}),Pe=/(-\w)/g;function Ve(e){const s={};for(const t in e){const p=t.replace(Pe,l=>l[1].toUpperCase());s[p]=e[t]}return s}const we=$({name:"QStepper",props:{...te,...ye,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Ce,setup(e,{slots:s}){const t=F(),p=ae(e,t.proxy.$q),{updatePanelsList:l,isValidPanelName:c,updatePanelIndex:i,getPanelContent:d,getPanels:g,panelDirectives:S,goToPanel:h,keepAliveProps:a,needsUniqueKeepAliveWrapper:u}=Se();ne(W,f(()=>({goToPanel:h,keepAliveProps:a,needsUniqueKeepAliveWrapper:u,...e})));const q=f(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0||p.value===!0?" q-stepper--flat no-shadow":"")+(e.bordered===!0||p.value===!0&&e.flat===!1?" q-stepper--bordered":"")+(p.value===!0?" q-stepper--dark q-dark":"")),v=f(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function I(){const r=V(s.message,[]);if(e.vertical===!0){c(e.modelValue)&&i();const _=o("div",{class:"q-stepper__content"},V(s.default));return r===void 0?[_]:r.concat(_)}return[o("div",{class:v.value},g().map(_=>{const x=Ve(_.props);return o(O,{key:x.name,stepper:e,step:x,goToPanel:h})})),r,le("div",{class:"q-stepper__content q-panel-parent"},d(),"cont",e.swipeable,()=>S.value)]}return()=>(l(s),o("div",{class:q.value},re(s.navigation,I())))}}),$e=$({name:"QStepperNavigation",setup(e,{slots:s}){return()=>o("div",{class:"q-stepper__nav"},V(s.default))}}),C={props:["step","backFunc","nextFunc"],render(){const e=o(w,{onClick:this.backFunc,label:"Back",flat:!0,color:"primary"}),s=o(w,{onClick:this.nextFunc,label:"Continue",color:"primary"});return o($e,{class:"flex justify-end mt-5 space-x-2"},()=>[this.step>1?e:void 0,this.step<6?s:void 0])}},Ie={class:"flex justify-center space-y-2"},Qe={class:"flex justify-end pt-4 space-x-2"},Ne=E({emits:["submit"],setup(e,{emit:s}){const t=oe({image:"",nickname:"",color:"",hobby:"",dateofbirth:""}),p=k(!1),l=k(),c=k(),i=k(1),d=k("");R(l,()=>{const a=new FileReader;a.readAsDataURL(l.value),a.onload=async()=>{await B.setImage(l.value.name,a.result),c.value=await B.getImage(l.value.name),t.image=l.value.name}});function g(){d.value="";const a=j.safeParse(t);a.success?p.value=!0:(p.value=!0,i.value=1,d.value=a.error.issues[0].message)}function S(){const a=j.safeParse(t);p.value&&a.success&&s("submit",a.data)}function h(){t.name="",Object.assign(t,{})}return se(()=>{h()}),(a,u)=>{const q=J;return N(),T(de,{flat:""},{default:b(()=>[n(pe,null,{default:b(()=>[P("div",null,[n(q,{jsonable:m(t)},null,8,["jsonable"]),n(H,{ref:"profileForm",class:"relative",onReset:h},{default:b(()=>[P("div",null,[n(we,{ref:"stepper",modelValue:i.value,"onUpdate:modelValue":u[6]||(u[6]=v=>i.value=v),"header-nav":"",vertical:"",color:"primary",animated:"",onKeydown:u[7]||(u[7]=D(A(v=>a.$refs.stepper.next(),["prevent"]),["enter"])),onTransition:g},{default:b(()=>[n(y,{name:1,title:"What's your name?",icon:"person_outline",error:!!d.value},{default:b(()=>[n(Q,{modelValue:m(t).name,"onUpdate:modelValue":u[0]||(u[0]=v=>m(t).name=v),label:"Name",required:"","stack-label":"",autofocus:"",error:!!d.value,"error-message":d.value},null,8,["modelValue","error","error-message"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1},8,["error"]),n(y,{name:2,title:"Do you have a nickname?",caption:"Optional",icon:"sentiment_very_satisfied"},{default:b(()=>[n(Q,{modelValue:m(t).nickname,"onUpdate:modelValue":u[1]||(u[1]=v=>m(t).nickname=v),label:"Nickname",required:"","stack-label":"",autofocus:""},null,8,["modelValue"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(y,{name:3,title:"What's your favourite thing to do?",icon:"attractions",caption:"Optional"},{default:b(()=>[n(Q,{modelValue:m(t).hobby,"onUpdate:modelValue":u[2]||(u[2]=v=>m(t).hobby=v),label:"Hobby","stack-label":"",autofocus:""},null,8,["modelValue"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(y,{name:4,title:"When is your birthday?",icon:"event",class:"flex justify-center",caption:"Optional"},{default:b(()=>[n(qe,{modelValue:m(t).dateofbirth,"onUpdate:modelValue":u[3]||(u[3]=v=>m(t).dateofbirth=v),flat:"",minimal:"",landscape:a.$q.screen.gt.sm},null,8,["modelValue","landscape"]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(y,{name:5,title:"What's your favourite colour?",caption:"Optional",icon:"palette",class:"flex justify-center"},{default:b(()=>[P("div",{style:ue({backgroundColor:m(t).color+"70",borderWidth:"5px",borderColor:m(t).color})},[n(xe,{modelValue:m(t).color,"onUpdate:modelValue":u[4]||(u[4]=v=>m(t).color=v),square:"",w:"300px",flat:"","no-footer":"","no-header":"","default-view":"palette","format-model":"hex"},null,8,["modelValue"])],4),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1}),n(y,{name:6,title:"Add a picture",caption:"Optional",icon:"photo_camera",class:""},{default:b(()=>[P("div",Ie,[n(ie,{class:"w-1/2",src:c.value},null,8,["src"]),n(M,{modelValue:l.value,"onUpdate:modelValue":u[5]||(u[5]=v=>l.value=v),outlined:""},{prepend:b(()=>[n(U,{name:"attach_file"})]),_:1},8,["modelValue"])]),n(C,{step:i.value,"back-func":()=>a.$refs.stepper.previous(),"next-func":()=>a.$refs.stepper.next()},null,8,["step","back-func","next-func"])]),_:1})]),_:1},8,["modelValue"])]),P("div",Qe,[n(w,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),p.value?(N(),T(w,{key:0,label:"Submit",color:"primary",onClick:S,onKeydown:u[8]||(u[8]=D(A(()=>{},["prevent","stop"]),["enter"]))})):ce("",!0)])]),_:1},512)])]),_:1})]),_:1})}}}),Be={class:"w-full md:w-1/2 mx-auto"},Te=_e(" New Profile "),Ue=E({setup(e){const s=ve(),{setActiveProfile:t,profiles:p}=fe();function l(c){p.push(c),t(c),s.push("/profiles")}return(c,i)=>{const d=Ne;return N(),me("div",Be,[n(be,null,{default:b(()=>[n(ge,null,{default:b(()=>[Te]),_:1})]),_:1}),n(d,{onSubmit:l})])}}});export{Ue as default};
